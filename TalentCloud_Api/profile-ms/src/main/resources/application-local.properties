spring.config.import=classpath:/application.properties
server.port=8081

# PostgreSQL Configuration
spring.datasource.url=jdbc:postgresql://localhost:5433/profiledb
spring.datasource.username=postgres
spring.datasource.password=123
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# File upload configuration
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=5MB
spring.servlet.multipart.max-request-size=5MB
spring.servlet.multipart.file-size-threshold=2KB

# Static resources configuration
spring.web.resources.static-locations=classpath:/static/,file:uploads/

# Debug logging for multipart requests
logging.level.org.springframework.web.multipart=DEBUG
logging.level.org.apache.tomcat.util.http.fileupload=DEBUG

spring.cloud.compatibility-verifier.enabled=false

# Eureka Configuration
spring.application.name=profile-ms
eureka.client.register-with-eureka=true
eureka.client.fetch-registry=true
eureka.client.service-url.defaultZone=http://localhost:8761/eureka/
eureka.instance.prefer-ip-address=true

# General Logging
logging.level.com.talentcloud=DEBUG

# ========== FEIGN CLIENT CONFIGURATION ==========
# Auth-ms URL Configuration
auth-ms.url=http://localhost:8222

# Feign Client Configuration
feign.client.config.default.connect-timeout=5000
feign.client.config.default.read-timeout=5000
feign.client.config.default.logger-level=full

# Feign logging
logging.level.com.talentcloud.profile.client=DEBUG
logging.level.feign=DEBUG

# ========== KAFKA CONFIGURATION ==========
# Kafka Configuration
spring.kafka.bootstrap-servers=localhost:9092
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer

# Kafka Producer Properties (for better reliability)
spring.kafka.producer.acks=all
spring.kafka.producer.retries=3
spring.kafka.producer.enable-idempotence=true
spring.kafka.producer.max-in-flight-requests-per-connection=1

# Kafka JSON Type Mapping (Important for proper serialization)
spring.kafka.producer.properties.spring.json.type.mapping=profileCreated:com.talentcloud.profile.dto.event.ProfileCreatedEvent,profileStatusChanged:com.talentcloud.profile.dto.event.ProfileStatusChangedEvent

# Topic Names (Optional - topics will be auto-created if they don't exist)
kafka.topics.profile-created=profile-created-topic
kafka.topics.profile-status-changed=profile-status-changed-topic

# Kafka Producer Timeout Configuration
spring.kafka.producer.properties.delivery.timeout.ms=30000
spring.kafka.producer.properties.request.timeout.ms=5000

# Kafka Logging
logging.level.com.talentcloud.profile.kafka=DEBUG
logging.level.org.apache.kafka=INFO
logging.level.org.springframework.kafka=DEBUG

# ========== ADDITIONAL CONFIGURATIONS ==========
# Enable JPA Auditing
spring.jpa.properties.hibernate.enable_lazy_load_no_trans=true

# Actuator endpoints (optional - for monitoring)
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always